(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83d27efa"],{4272:function(t,a,s){"use strict";s.d(a,"a",(function(){return r}));var e=function t(a,s){if(a===s)return!0;if(a&&s&&"object"==typeof a&&"object"==typeof s){if(a.constructor!==s.constructor)return!1;var e,i,r;if(Array.isArray(a)){if(e=a.length,e!=s.length)return!1;for(i=e;0!==i--;)if(!t(a[i],s[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===s.source&&a.flags===s.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===s.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===s.toString();if(r=Object.keys(a),e=r.length,e!==Object.keys(s).length)return!1;for(i=e;0!==i--;)if(!Object.prototype.hasOwnProperty.call(s,r[i]))return!1;for(i=e;0!==i--;){var l=r[i];if(!t(a[l],s[l]))return!1}return!0}return a!==a&&s!==s};const i="__googleMapsScriptId";class r{constructor({apiKey:t,channel:a,client:s,id:l=i,libraries:o=[],language:n,region:c,version:d,mapIds:h,nonce:p,retries:u=3,url:g="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=d,this.apiKey=t,this.channel=a,this.client=s,this.id=l||i,this.libraries=o,this.language=n,this.region=c,this.mapIds=h,this.nonce=p,this.retries=u,this.url=g,r.instance){if(!e(this.options,r.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(r.instance.options)}`);return r.instance}r.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback="+this.CALLBACK,this.apiKey&&(t+="&key="+this.apiKey),this.channel&&(t+="&channel="+this.channel),this.client&&(t+="&client="+this.client),this.libraries.length>0&&(t+="&libraries="+this.libraries.join(",")),this.language&&(t+="&language="+this.language),this.region&&(t+="&region="+this.region),this.version&&(t+="&v="+this.version),this.mapIds&&(t+="&map_ids="+this.mapIds.join(",")),t}load(){return this.loadPromise()}loadPromise(){return new Promise((t,a)=>{this.loadCallback(s=>{s?a(s.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),a=document.createElement("script");a.id=this.id,a.type="text/javascript",a.src=t,a.onerror=this.loadErrorCallback.bind(this),a.defer=!0,a.async=!0,this.nonce&&(a.nonce=this.nonce),document.head.appendChild(a)}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}},"4e57":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container p-4"},[s("div",{staticClass:"card m-4"},[s("div",{staticClass:"card-header"},[t._v("Profil #"+t._s(t.phone))]),s("div",{staticClass:"card-body"},[t.errorMessage?s("div",{staticClass:"text-center text-warning"},[t._v(" "+t._s(t.errorMessage)+" "),s("hr"),s("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.tray_again}},[t._v("Réessayer")])]):t.isLoading?s("loading-compoenent"):s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",{attrs:{for:"input-live"}},[t._v("Prénom *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.name||"/"))])])]),s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",{attrs:{for:"input-live"}},[t._v("Nom *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.family||"/"))])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",{attrs:{for:"input-live"}},[t._v("Date de naissance *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.birthday||"/"))])])]),s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",{attrs:{for:"input-live"}},[t._v("Sex *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.genre||"/"))])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",[t._v("Wilaya *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.wilaya||"/"))])])]),s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",[t._v("Baladia *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.baladia||"/"))])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",[t._v("address *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.address||"/"))])]),s("div",{staticClass:"col"},[s("label",[t._v("Position GPS *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.lat_lan.lat+","+t.lat_lan.lan))])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",{attrs:{for:"input-live"}},[t._v("Email *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.email||"/"))])])]),s("div",{staticClass:"col"},[s("div",{staticClass:"form-group my-2"},[s("label",{attrs:{for:"input-live"}},[t._v("Mobile *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.phone||"/"))])])])]),s("hr",{staticClass:"my-1"}),s("div",{staticClass:"mb-2",attrs:{role:"group"}},[s("label",{attrs:{for:"input-live"}},[t._v("Type de compte *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.type||"/"))])]),"driver"==t.type?s("div",{staticClass:"mb-2",attrs:{role:"group"}},[s("label",{attrs:{for:"input-live"}},[t._v("Classe *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.rank||"/"))])]):t._e(),"user"==t.type?s("div",{staticClass:"mb-2",attrs:{role:"group"}},[s("label",{attrs:{for:"input-live"}},[t._v("Kind *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.kind||"/"))])]):t._e(),"driver"==t.type?s("div",{staticClass:"mb-2",attrs:{role:"group"}},[s("label",{attrs:{for:"input-live"}},[t._v("Vehicule *:")]),s("p",{staticClass:"alert alert-secondary px-2 py-1"},[t._v(t._s(t.vehicule||"/"))])]):t._e()]),t.show_map?s("div",{staticClass:"card-footer text-center p-3"},[s("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"map"}})]):t._e()],1)])])},i=[],r=(s("b0c0"),s("f9f2")),l=s("4272"),o={name:"editProfileComponent",components:{},data:function(){return{phone:"",name:"",family:"",birthday:"",genre:"",wilaya:"",baladia:"",address:"",lat_lan:{lat:"",lan:""},email:"",kind:"",vehicule:"",type:"",rank:"",show_map:!1,errorMessage:null,isLoading:!1}},computed:{},watch:{$route:function(){this.load_profile(this.phone)}},created:function(){var t=this.$route.params.phone;"current-user"==t&&this.$store.state.user?(this.phone=this.$store.state.user.phoneNumber,this.load_profile(this.phone)):(this.phone=t,this.load_profile(this.phone))},methods:{tray_again:function(){this.isLoading=!1,this.errorMessage=null},load_profile:function(t){var a=this;t?(console.log("load_profile",t),this.isLoading=!0,this.errorMessage=null,r["d"].collection("users").doc(t).get().then((function(t){a.isLoading=!1,a.errorMessage=null,t.exists?(console.log("Document successfully loaded!"),a.phone=t.data().phone||"",a.name=t.data().name||"",a.family=t.data().family||"",a.birthday=t.data().birthday||"",a.genre=t.data().genre||"",a.wilaya=t.data().wilaya||"",a.baladia=t.data().baladia||"",a.address=t.data().address||"",a.lat_lan.lat=t.data().lat_lan.lat||"",a.lat_lan.lan=t.data().lat_lan.lan||"",a.email=t.data().email||"",a.kind=t.data().kind||"",a.vehicule=t.data().vehicule||"",a.type=t.data().type||"",a.rank=t.data().rank||"",a.show_google_maps()):console.log("Document could not be found!")})).catch((function(t){a.isLoading=!1,a.errorMessage=t,console.log(t)}))):console.log("No user is available")},show_google_maps:function(){var t=this;if(""!=this.lat_lan.lat||""!=this.lat_lan.lat){this.show_map=!0;var a=new l["a"]({apiKey:this.$googleMapAPiKey,version:"weekly"});a.load().then((function(){new window.google.maps.Map(document.getElementById("map"),{center:{lat:t.lat_lan.lat,lng:t.lat_lan.lan},zoom:15})}))}}}},n=o,c=s("2877"),d=Object(c["a"])(n,e,i,!1,null,"7f5600d0",null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-83d27efa.be5ced77.js.map