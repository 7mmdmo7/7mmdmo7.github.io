(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1815a722"],{"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),s=r("785a"),o=r("17c2"),i=r("9112"),c=function(e){if(e&&e.forEach!==o)try{i(e,"forEach",o)}catch(t){e.forEach=o}};for(var u in a)a[u]&&c(n[u]&&n[u].prototype);c(s)},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),s=a("forEach");e.exports=s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},f1ee:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container p-4"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[e._v("Configuration")]),r("div",{staticClass:"card-body"},[e.errorMessage?r("div",{staticClass:"text-center text-warning"},[e._v(" "+e._s(e.errorMessage)+" "),r("hr"),r("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:e.tray_again}},[e._v("Réessayer")])]):e.isLoading?r("loading-compoenent"):r("div",[r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:e.reset_driver_list}},[e._v("Synchroniser la liste des Transporteur")]),r("hr"),r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:e.create_fake_user}},[e._v("Créer faux Utilisateurs")]),r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:function(t){return e.delete_all_documents("users")}}},[e._v("Supprimer tous les Utilisateurs")]),r("hr"),r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:e.create_fake_requests}},[e._v("Créer faux Paquets")]),r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:function(t){return e.delete_all_documents("requests")}}},[e._v("Supprimer tous les Paquets")]),r("hr"),r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:function(t){return e.changePhoneNumber(null,null)}}},[e._v("Changer le numéro de Téléphone d'un utilisateur")]),r("hr"),r("button",{staticClass:"btn btn-outline-primary text-start btn-lg w-100 my-1",on:{click:e.test}},[r("i",{staticClass:"bi-arrow-right me-2"}),e._v(" Test button ")])])],1)])])},a=[],s=r("1da1"),o=(r("96cf"),r("159b"),r("b0c0"),r("f9f2")),i={name:"configurationComponent",components:{},data:function(){return{drivers:[],errorMessage:null,isLoading:!1}},watch:{},created:function(){console.log(o["c"],o["d"],o["a"])},methods:{test:function(){console.log(this.$mock_data.fake_phone_number())},delete_all_documents:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,t.errorMessage=null,r.next=4,o["d"].collection(e).get();case 4:n=r.sent,n.docs.forEach((function(r){t.isLoading=!0,t.errorMessage=null,o["d"].collection(e).doc(r.id).delete(),console.log("Document deleted!",r),t.isLoading=!1,t.errorMessage=null})),console.log("Documents deleted!",n.docs),t.isLoading=!1,t.errorMessage=null;case 9:case"end":return r.stop()}}),r)})))()},create_fake_user:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal({title:"Combient?",input:"number"});case 2:r=t.sent,n=parseInt(r.value),a=0;case 5:if(!(a<n)){t.next=17;break}return e.isLoading=!0,e.errorMessage=null,s=e.$mock_data.user(),t.next=11,o["d"].collection("users").doc(s.phone).set(s);case 11:e.isLoading=!1,e.errorMessage=null,console.log("Document created!");case 14:a++,t.next=5;break;case 17:case"end":return t.stop()}}),t)})))()},create_fake_requests:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal({title:"Combient?",input:"number"});case 2:r=t.sent,n=parseInt(r.value),a=0;case 5:if(!(a<n)){t.next=17;break}return e.isLoading=!0,e.errorMessage=null,s=e.$mock_data.request(),t.next=11,o["d"].collection("requests").doc(s.phone).set(s);case 11:e.isLoading=!1,e.errorMessage=null,console.log("Document created!");case 14:a++,t.next=5;break;case 17:case"end":return t.stop()}}),t)})))()},reset_driver_list:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,e.errorMessage=null,r=null,t.prev=3,t.next=6,o["d"].collection("users").get();case 6:r=t.sent,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](3),e.isLoading=!1,e.errorMessage=t.t0,console.log("error",t.t0);case 14:if(console.log("Documents loaded!",r),r.docs){t.next=19;break}return e.isLoading=!1,e.errorMessage=null,t.abrupt("return");case 19:return n=[],r.docs.forEach((function(e){e.exists&&n.push({phone:e.data().phone||"",name:(e.data().name||"")+" "+(e.data().family||""),wilaya:e.data().wilaya||"",baladia:e.data().baladia||""})})),t.next=23,o["d"].collection("configuration").doc("drivers").set({drivers:e.drivers,modified_at:o["a"].serverTimestamp()});case 23:e.update_this_devise_drivers_list(),e.isLoading=!1,e.errorMessage=null;case 26:case"end":return t.stop()}}),t,null,[[3,9]])})))()},update_this_devise_drivers_list:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["d"].collection("configuration").doc("drivers").get();case 2:return r=t.sent,e.$store.commit("set_drivers",r.data()),t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})))()},changePhoneNumber:function(){var e=arguments,t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,a,i,c,u,l,d,p,f,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:null,a=e.length>1&&void 0!==e[1]?e[1]:null,n){r.next=8;break}return r.next=5,t.$swal({title:"Ancien numéro de téléphone ?",input:"text"});case 5:i=r.sent,console.log("result",i),n=i.value;case 8:if(n){r.next=10;break}return r.abrupt("return");case 10:if(a){r.next=16;break}return r.next=13,t.$swal({title:"Nouveau numéro de téléphone ?",input:"text"});case 13:c=r.sent,console.log("result",c),a=c.value;case 16:if(a){r.next=18;break}return r.abrupt("return");case 18:return r.next=20,o["d"].collection("user").doc(n).get();case 20:if(u=r.sent,u.exists){r.next=25;break}return t.$swal("L'ancien utilisateur n'a pas été trouvé !"),console.log("L'ancien utilisateur n'a pas été trouvé !"),r.abrupt("return");case 25:return r.next=27,o["d"].collection("user").doc(n).get();case 27:if(l=r.sent,!l.exists){r.next=32;break}return t.$swal("Le nouveau numéro de téléphone est déjà pri !"),console.log("Le nouveau numéro de téléphone est déjà pri !"),r.abrupt("return");case 32:return d=u.data(),r.next=35,o["d"].collection("user").doc(a).set(d);case 35:if("user"!=d.type){r.next=40;break}return r.next=38,o["d"].collection("requests").whete("userPhone","==",n).get();case 38:p=r.sent,p.docs.forEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o["d"].collection("requests").doc(t.id).update({userPhone:a});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 40:if("driver"!=d.type){r.next=45;break}return r.next=43,o["d"].collection("requests").whete("driverPhone","==",n).get();case 43:f=r.sent,f.docs.forEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["d"].collection("requests").doc(t.id).update({driverPhone:a});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 45:return r.next=47,o["d"].collection("users").doc(n).delete();case 47:g=r.sent,console.log("Old user deleted!",g);case 49:case"end":return r.stop()}}),r)})))()}}},c=i,u=r("2877"),l=Object(u["a"])(c,n,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-1815a722.69017760.js.map