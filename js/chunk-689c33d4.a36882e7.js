(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-689c33d4"],{"159b":function(t,e,n){var r=n("da84"),s=n("fdbc"),a=n("785a"),o=n("17c2"),i=n("9112"),c=function(t){if(t&&t.forEach!==o)try{i(t,"forEach",o)}catch(e){t.forEach=o}};for(var d in s)s[d]&&c(r[d]&&r[d].prototype);c(a)},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,s=n("a640"),a=s("forEach");t.exports=a?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),s=n("b727").find,a=n("44d2"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),r({target:"Array",proto:!0,forced:i},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},a434:function(t,e,n){"use strict";var r=n("23e7"),s=n("23cb"),a=n("5926"),o=n("07fa"),i=n("7b0b"),c=n("65f0"),d=n("8418"),u=n("1dde"),l=u("splice"),f=Math.max,h=Math.min,_=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,u,l,m,g,p=i(this),v=o(p),y=s(t,v),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=v-y):(n=w-2,r=h(f(a(e),0),v-y)),v+n-r>_)throw TypeError(b);for(u=c(p,r),l=0;l<r;l++)m=y+l,m in p&&d(u,l,p[m]);if(u.length=r,n<r){for(l=y;l<v-r;l++)m=l+r,g=l+n,m in p?p[g]=p[m]:delete p[g];for(l=v;l>v-r+n;l--)delete p[l-1]}else if(n>r)for(l=v-r;l>y;l--)m=l+r-1,g=l+n-1,m in p?p[g]=p[m]:delete p[g];for(l=0;l<n;l++)p[l+y]=arguments[l+2];return p.length=v-r+n,u}})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,n){var r=n("23e7"),s=n("7b0b"),a=n("df75"),o=n("d039"),i=o((function(){a(1)}));r({target:"Object",stat:!0,forced:i},{keys:function(t){return a(s(t))}})},c81a:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-4"},[n("h2",[t._v("Paquets")]),n("div",{staticClass:"text-end mb-2"}),n("div",{},[t.errorMessage?n("div",{staticClass:"card card-body p-2 text-center text-warning"},[t._v(" "+t._s(t.errorMessage)+" "),n("hr"),n("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.tray_again}},[t._v("RÃ©essayer")])]):n("div",[n("table",{staticClass:"table table-striped table-index"},[t._m(0),n("tbody",t._l(t.documents,(function(e){return n("tr",{key:e.id},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e.packageCode))]),n("td",[t._v(t._s(e.description))]),n("td",[t._v(t._s(e.userPhone))]),n("td",[t._v(t._s(t._f("moment")(e.created_at)))]),n("td",[t._v(t._s(t._f("state_filter")(e.state)))]),n("td",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-secondary btn-sm me-1",on:{click:function(n){return t.show_document(e)}}},[n("i",{staticClass:"bi-eye-fill"})]),n("button",{staticClass:"btn btn-warning btn-sm me-1",on:{click:function(n){return t.update_document(e)}}},[n("i",{staticClass:"bi-pencil-square"})]),n("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(n){return t.delete_document(e)}}},[n("i",{staticClass:"bi-trash"})])])])})),0)])]),t.isLoading?n("loading-compoenent"):t._e()],1),t.errorMessage||t.isLoading?t._e():n("div",{staticClass:"my-4 py-1 text-center"},[0===t.lastQuerySize?n("p",{staticClass:"alert alert-warning"},[t._v("No more items to load !")]):t._e(),n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.smart_load_documents}},[t._v(" Voir plus "),n("i",{staticClass:"bi-chevron-double-right ms-1"})])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Code")]),n("th",{attrs:{scope:"col"}},[t._v("Description")]),n("th",{attrs:{scope:"col"}},[t._v("Distributeur")]),n("th",{attrs:{scope:"col"}},[t._v("Date")]),n("th",{attrs:{scope:"col"}},[t._v("Status")]),n("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Actions")])])])}],a=n("5530"),o=(n("159b"),n("7db0"),n("a434"),n("f9f2")),i={components:{},data:function(){return{documents:[],collection:"requests",first_created_at:null,last_created_at:null,limit:20,lastQuerySize:!1,errorMessage:null,isLoading:!1}},computed:{total:function(){return this.documents.length}},watch:{$route:function(){this.documents=[],this.first_created_at=null,this.last_created_at=null,this.limit=20,this.lastQuerySize=!1,this.errorMessage=null,this.isLoading=!1,this.smart_load_documents()}},created:function(){this.smart_load_documents()},methods:{tray_again:function(){this.isLoading=!1,this.errorMessage=null},smart_load_documents:function(){var t=this;this.isLoading=!0,this.errorMessage=null;var e=this.getQuery();this.last_created_at&&(e=e.where("created_at","<",this.last_created_at)),e.limit(this.limit).get().then((function(e){t.isLoading=!1,t.errorMessage=null,console.log("Documents loaded!"),e.docs.forEach((function(e){t.add_document(Object(a["a"])({id:e.id},e.data()))})),t.smart_load_new_documents(),t.lastQuerySize=e.docs.length})).catch((function(e){t.isLoading=!1,t.errorMessage=null,console.log("error",e)}))},getQuery:function(){var t=o["d"].collection(this.collection);return t=t.orderBy("created_at","desc"),t},add_document:function(t){this.delete_document_by_id(t.id),this.documents.push(t),this.smart_load_update_created_at(t)},smart_load_update_created_at:function(t){var e=t.created_at;e&&((!this.last_created_at||this.last_created_at.toDate()>e.toDate())&&(this.last_created_at=e),(!this.first_created_at||this.first_created_at.toDate()<e.toDate())&&(this.first_created_at=e))},delete_document_by_id:function(t){var e=this.documents.find((function(e){return e.id===t}));e&&this.documents.splice(this.documents.indexOf(e),1)},smart_load_new_documents:function(){var t=this;this.isLoading=!0,this.errorMessage=null;var e=this.getQuery();this.first_created_at&&(e=e.where("created_at",">",this.first_created_at)),e.limit(this.limit).get().then((function(e){t.isLoading=!1,t.errorMessage=null,console.log("New Documents loaded!"),e.docs.forEach((function(e){t.add_document(Object(a["a"])({id:e.id},e.data()))}))})).catch((function(e){t.isLoading=!1,t.errorMessage=null,console.log("error",e)}))},create_document:function(){this.$router.push({name:"packages-create"})},show_document:function(t){this.$router.push({name:"packages-show",params:{id:t.id}})},update_document:function(t){this.$router.push({name:"packages-edit",params:{id:t.id}})},delete_document:function(t){var e=this;window.confirm("Do you really want to delete?")&&(this.isLoading=!0,this.errorMessage=null,o["d"].collection(this.collection).doc(t.id).delete().then((function(){e.isLoading=!1,e.errorMessage=null,console.log("Documents deleted!",t.id),e.documents.splice(e.documents.indexOf(t),1)})).catch((function(t){e.isLoading=!1,e.errorMessage=null,console.log("error",t)})))}}},c=i,d=n("2877"),u=Object(d["a"])(c,r,s,!1,null,"5f8ef8b5",null);e["default"]=u.exports},dbb4:function(t,e,n){var r=n("23e7"),s=n("83ab"),a=n("56ef"),o=n("fc6a"),i=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),s=i.f,d=a(r),u={},l=0;while(d.length>l)n=s(r,e=d[l++]),void 0!==n&&c(u,e,n);return u}})},e439:function(t,e,n){var r=n("23e7"),s=n("d039"),a=n("fc6a"),o=n("06cf").f,i=n("83ab"),c=s((function(){o(1)})),d=!i||c;r({target:"Object",stat:!0,forced:d,sham:!i},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})}}]);
//# sourceMappingURL=chunk-689c33d4.a36882e7.js.map