(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13cb5fcf"],{"159b":function(t,e,s){var r=s("da84"),n=s("fdbc"),o=s("785a"),a=s("17c2"),i=s("9112"),c=function(t){if(t&&t.forEach!==a)try{i(t,"forEach",a)}catch(e){t.forEach=a}};for(var l in n)n[l]&&c(r[l]&&r[l].prototype);c(o)},"17c2":function(t,e,s){"use strict";var r=s("b727").forEach,n=s("a640"),o=n("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},5530:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));s("b64b"),s("a4d3"),s("4de4"),s("e439"),s("159b"),s("dbb4");function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}},7960:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container p-4"},[s("h2",[t._v("Posts")]),s("div",{staticClass:"text-end mb-2"},[s("button",{staticClass:"btn btn-outline-primary ms-1",on:{click:function(e){return t.create_post()}}},[s("i",{staticClass:"bi-pencil-fill me-1"}),t._v(" Add ")]),t._v(" | "),s("button",{staticClass:"btn btn-outline-danger ms-1",on:{click:function(e){return t.create_fake_post()}}},[s("i",{staticClass:"bi-broadcast me-1"}),t._v(" Fake ")]),s("button",{staticClass:"btn btn-outline-danger ms-1",on:{click:function(e){return t.delete_posts()}}},[s("i",{staticClass:"bi-recycle me-1"})])]),s("div",{staticClass:"card card-body p-2"},[t.errorMessage?s("div",{staticClass:"text-center text-warning"},[t._v(" "+t._s(t.errorMessage)+" "),s("hr"),s("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.tray_again}},[t._v("RÃ©essayer")])]):s("div",[s("table",{staticClass:"table table-striped table-index"},[t._m(0),s("tbody",t._l(t.posts,(function(e){return s("tr",{key:e.id},[s("th",{staticClass:"align-middle td-title text-primary",attrs:{scope:"row"},on:{click:function(s){return t.show_post(e)}}},[t._v(t._s(e.title))]),s("td",{staticClass:"align-middle"},[t._v(t._s(e.author))]),s("td",{staticClass:"align-middle"},[t._v(t._s(t._f("moment")(e.created_at)))]),s("td",{staticClass:"align-middle text-center"},[s("button",{staticClass:"btn btn-primary btn-sm me-1",on:{click:function(s){return t.show_post(e)}}},[s("i",{staticClass:"bi-eye"})]),s("button",{staticClass:"btn btn-warning btn-sm me-1",on:{click:function(s){return t.update_post(e)}}},[s("i",{staticClass:"bi-pencil-square"})]),s("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(s){return t.delete_post(e)}}},[s("i",{staticClass:"bi-trash"})])])])})),0)])]),t.isLoading?s("loading-compoenent"):t._e()],1),t.errorMessage||t.isLoading?t._e():s("div",{staticClass:"my-4 py-1 text-center"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.smart_load_posts}},[t._v(" Voir plus "),s("i",{staticClass:"bi-chevron-double-right ms-1"})])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Title")]),s("th",{attrs:{scope:"col"}},[t._v("Author")]),s("th",{attrs:{scope:"col"}},[t._v("Created at")]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Actions")])])])}],o=s("5530"),a=s("1da1"),i=(s("96cf"),s("a434"),s("7db0"),s("159b"),s("f9f2")),c={components:{},data:function(){return{posts:[],first_created_at:null,last_created_at:null,limit:20,errorMessage:null,isLoading:!1}},computed:{total:function(){return this.posts.length}},created:function(){this.smart_load_posts()},methods:{tray_again:function(){this.isLoading=!1,this.errorMessage=null},create_post:function(){this.$router.push({name:"posts-create"})},show_post:function(t){this.$router.push({name:"posts-show",params:{id:t.id}})},update_post:function(t){this.$router.push({name:"posts-edit",params:{id:t.id}})},delete_post:function(t){var e=this;window.confirm("Do you really want to delete?")&&(this.isLoading=!0,this.errorMessage=null,i["d"].collection("posts").doc(t.id).delete().then((function(){e.isLoading=!1,e.errorMessage=null,console.log("Post successfully deleted!"),e.posts.splice(e.posts.indexOf(t),1)})).catch((function(t){e.isLoading=!1,e.errorMessage=null,console.log("error",t)})))},create_fake_post:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.errorMessage=null,s=i["a"].serverTimestamp(),e.next=5,i["d"].collection("posts").add({title:t.$faker.lorem.words(3),author:t.$faker.lorem.words(1),content:t.$faker.lorem.paragraphs(),created_at:s,modified_at:s});case 5:r=e.sent,t.load_post(r.id),t.isLoading=!1,t.errorMessage=null,console.log("Post successfully created!");case 10:case"end":return e.stop()}}),e)})))()},delete_post_by_id:function(t){var e=this.posts.find((function(e){return e.id===t}));e&&this.posts.splice(this.posts.indexOf(e),1)},add_post:function(t){this.delete_post_by_id(t.id),this.posts.push(t),this.smart_load_update_created_at(t)},load_post:function(t){var e=this;this.isLoading=!0,this.errorMessage=null,i["d"].collection("posts").doc(t).get().then((function(t){e.isLoading=!1,e.errorMessage=null,e.add_post(Object(o["a"])({id:t.id},t.data()))})).catch((function(t){e.isLoading=!1,e.errorMessage=t,console.log("error",t)}))},smart_load_posts:function(){var t=this;this.isLoading=!0,this.errorMessage=null;var e=i["d"].collection("posts");e=e.orderBy("created_at","desc"),this.last_created_at&&(e=e.where("created_at","<",this.last_created_at)),e.limit(this.limit).get().then((function(e){t.isLoading=!1,t.errorMessage=null,console.log("Posts successfully loaded!"),e.docs.forEach((function(e){t.add_post(Object(o["a"])({id:e.id},e.data()))})),t.smart_load_new_posts()})).catch((function(e){t.isLoading=!1,t.errorMessage=null,console.log("error",e)}))},smart_load_new_posts:function(){var t=this;this.isLoading=!0,this.errorMessage=null;var e=i["d"].collection("posts");e=e.orderBy("created_at","desc"),this.first_created_at&&(e=e.where("created_at",">",this.first_created_at)),e.limit(this.limit).get().then((function(e){t.isLoading=!1,t.errorMessage=null,console.log("Posts successfully loaded!"),e.docs.forEach((function(e){t.add_post(Object(o["a"])({id:e.id},e.data()))}))})).catch((function(e){t.isLoading=!1,t.errorMessage=null,console.log("error",e)}))},smart_load_update_created_at:function(t){var e=t.created_at;e&&((!this.last_created_at||this.last_created_at.toDate()>e.toDate())&&(this.last_created_at=e),(!this.first_created_at||this.first_created_at.toDate()<e.toDate())&&(this.first_created_at=e))},delete_posts:function(){var t=this;window.confirm("Do you really want to delete all shown posts?")&&this.posts.forEach((function(e){i["d"].collection("posts").doc(e.id).delete().then((function(){t.posts.splice(t.posts.indexOf(e),1)})).catch((function(e){t.isLoading=!1,t.errorMessage=null,console.log("error",e)}))}))}}},l=c,d=(s("e7b2"),s("2877")),u=Object(d["a"])(l,r,n,!1,null,"3e76c686",null);e["default"]=u.exports},"7db0":function(t,e,s){"use strict";var r=s("23e7"),n=s("b727").find,o=s("44d2"),a="find",i=!0;a in[]&&Array(1)[a]((function(){i=!1})),r({target:"Array",proto:!0,forced:i},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},a434:function(t,e,s){"use strict";var r=s("23e7"),n=s("23cb"),o=s("5926"),a=s("07fa"),i=s("7b0b"),c=s("65f0"),l=s("8418"),d=s("1dde"),u=d("splice"),f=Math.max,p=Math.min,h=9007199254740991,_="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var s,r,d,u,b,g,m=i(this),v=a(m),y=n(t,v),w=arguments.length;if(0===w?s=r=0:1===w?(s=0,r=v-y):(s=w-2,r=p(f(o(e),0),v-y)),v+s-r>h)throw TypeError(_);for(d=c(m,r),u=0;u<r;u++)b=y+u,b in m&&l(d,u,m[b]);if(d.length=r,s<r){for(u=y;u<v-r;u++)b=u+r,g=u+s,b in m?m[g]=m[b]:delete m[g];for(u=v;u>v-r+s;u--)delete m[u-1]}else if(s>r)for(u=v-r;u>y;u--)b=u+r-1,g=u+s-1,b in m?m[g]=m[b]:delete m[g];for(u=0;u<s;u++)m[u+y]=arguments[u+2];return m.length=v-r+s,d}})},a640:function(t,e,s){"use strict";var r=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&r((function(){s.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,s){var r=s("23e7"),n=s("7b0b"),o=s("df75"),a=s("d039"),i=a((function(){o(1)}));r({target:"Object",stat:!0,forced:i},{keys:function(t){return o(n(t))}})},dbb4:function(t,e,s){var r=s("23e7"),n=s("83ab"),o=s("56ef"),a=s("fc6a"),i=s("06cf"),c=s("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,s,r=a(t),n=i.f,l=o(r),d={},u=0;while(l.length>u)s=n(r,e=l[u++]),void 0!==s&&c(d,e,s);return d}})},e439:function(t,e,s){var r=s("23e7"),n=s("d039"),o=s("fc6a"),a=s("06cf").f,i=s("83ab"),c=n((function(){a(1)})),l=!i||c;r({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},e7b2:function(t,e,s){"use strict";s("f09f")},f09f:function(t,e,s){}}]);
//# sourceMappingURL=chunk-13cb5fcf.1ef36383.js.map