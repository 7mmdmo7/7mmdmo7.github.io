(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5fa8"],{"1ace":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container p-4"},[i("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit.apply(null,arguments)}}},[i("div",{staticClass:"card m-4"},[i("div",{staticClass:"card-header"},[t._v("Mon Profile")]),i("div",{staticClass:"card-body"},[t.errorMessage?i("div",{staticClass:"text-center text-warning"},[t._v(" "+t._s(t.errorMessage)+" "),i("hr"),i("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.tray_again}},[t._v("RÃ©essayer")])]):t.isLoading?i("loading-compoenent"):i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"form-group py-1"},[i("label",{attrs:{for:"input-live"}},[t._v("First Name: *")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.document.first_name,expression:"document.first_name"}],staticClass:"form-control",attrs:{type:"text",trim:"",require:""},domProps:{value:t.document.first_name},on:{input:function(e){e.target.composing||t.$set(t.document,"first_name",e.target.value)}}})])]),i("div",{staticClass:"col"},[i("div",{staticClass:"form-group py-1"},[i("label",{attrs:{for:"input-live"}},[t._v("Last Name: *")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.document.last_name,expression:"document.last_name"}],staticClass:"form-control",attrs:{type:"text",trim:"",require:""},domProps:{value:t.document.last_name},on:{input:function(e){e.target.composing||t.$set(t.document,"last_name",e.target.value)}}})])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",[t._v("State: *")]),i("select-component",{attrs:{options:t.states,trim:"",required:""},model:{value:t.document.state,callback:function(e){t.$set(t.document,"state",e)},expression:"document.state"}})],1)]),i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},[i("label",[t._v("City: *")]),i("select-component",{attrs:{options:t.cities_filtred,trim:"",required:""},model:{value:t.document.city,callback:function(e){t.$set(t.document,"city",e)},expression:"document.city"}})],1)])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"form-group py-1"},[i("label",{attrs:{for:"input-live"}},[t._v("Email: *")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.document.email,expression:"document.email"}],staticClass:"form-control",attrs:{type:"text",trim:"",require:""},domProps:{value:t.document.email},on:{input:function(e){e.target.composing||t.$set(t.document,"email",e.target.value)}}})])]),i("div",{staticClass:"col"},[i("div",{staticClass:"form-group py-1"},[i("label",{attrs:{for:"input-live"}},[t._v("Mobile: *")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.document.mobile,expression:"document.mobile"}],staticClass:"form-control",attrs:{type:"text",trim:"",require:""},domProps:{value:t.document.mobile},on:{input:function(e){e.target.composing||t.$set(t.document,"mobile",e.target.value)}}})])])]),i("div",{staticClass:"mb-2",attrs:{role:"group"}},[i("label",{attrs:{for:"input-live"}},[t._v("Kind:")]),i("select-component",{attrs:{options:t.kinds,trim:"",required:""},model:{value:t.document.kind,callback:function(e){t.$set(t.document,"kind",e)},expression:"document.kind"}})],1)])],1),t.errorMessage||t.isLoading?t._e():i("div",{staticClass:"card-footer"},[t._m(0)])])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-grid p-1"},[i("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"submit"}},[i("i",{staticClass:"bi-person me-2"}),t._v("Suivant ")])])}],o=i("2909"),n=(i("7db0"),i("99af"),i("f9f2")),r=i("f749"),c={name:"inscriptionDistributeurComponent",components:{},data:function(){return{kinds:["Particulier","Entreprise"],document:{email:"",role:"",permissions:"",first_name:"",last_name:"",state:"",city:"",mobile:"",kind:"",created_at:"",modified_at:""},exists:!1,errorMessage:null,isLoading:!1}},computed:{cities_filtred:function(){var t=this,e=[];if(""==this.document.state)return e;var i=this.states.find((function(e){return e.value==t.document.state}));return i&&(e=[{value:"",text:""}].concat(Object(o["a"])(i.cities))),e},currentUser:function(){return this.$store.state.user}},watch:{state:function(t){t==this.initState?this.city=this.initCity:this.document.city=""},currentUser:function(t){t&&this.load_profile(t)}},created:function(){this.states=r["a"],this.currentUser&&this.load_profile(this.currentUser)},methods:{tray_again:function(){this.isLoading=!1,this.errorMessage=null},load_profile:function(t){var e=this;t?(console.log("load_profile",t.uid),this.document.uid=t.uid,this.isLoading=!0,this.errorMessage=null,n["c"].collection("users").doc(t.uid).get().then((function(i){e.isLoading=!1,e.errorMessage=null,i.exists?(console.log("Document successfully loaded!"),e.document.uid=t.uid||"",e.document.email=i.data().email||"",e.document.role=i.data().role||"DRIVER",e.document.permissions=i.data().permissions||"",e.document.first_name=i.data().first_name||"Mohammed",e.document.last_name=i.data().last_name||"HAMIMED",e.document.state=i.data().state||"Mila",e.document.city=i.data().city||"Sidi Merouane",e.document.mobile=i.data().mobile||"0793470277",e.document.vehicle=i.data().vehicle||"Car",e.document.kind=i.data().kind||"Particulier",e.document.created_at=i.data().created_at||"",e.document.modified_at=i.data().modified_at||""):(e.document.uid=t.uid,e.document.email=t.email,e.document.role="DRIVER",e.document.permissions="",e.document.first_name="Mohammed",e.document.last_name="HAMIMED",e.document.state="Mila",e.document.city="Sidi Merouane",e.document.mobile="0793470277",e.document.vehicle="Car",e.document.kind="Particulier",e.document.created_at="",e.document.modified_at="",console.log("Document could not be found!"))})).catch((function(t){e.isLoading=!1,e.errorMessage=t,console.log(t)}))):console.log("No user is available")},formSubmit:function(){this.set_profile(this.document.uid)},set_profile:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isLoading=!0,this.errorMessage=null;var i=n["a"].serverTimestamp(),s={uid:e,email:this.document.email,role:this.document.role,permissions:this.document.permissions,first_name:this.document.first_name,last_name:this.document.last_name,state:this.document.state,city:this.document.city,mobile:this.document.mobile,vehicle:this.document.vehicle,kind:this.document.kind,created_at:i,modified_at:i};n["c"].collection("users").doc(e).set(s,{merge:!0}).then((function(){t.isLoading=!1,t.errorMessage=null,console.log("Document successfully created!"),t.$router.push({name:"home"})})).catch((function(e){t.isLoading=!1,t.errorMessage=e,console.log("error",e)}))}}},l=c,d=i("2877"),u=Object(d["a"])(l,s,a,!1,null,"018310cc",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0b5fa8.fceb6481.js.map