(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb8933dc"],{"1ace":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container p-4"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.formSubmit.apply(null,arguments)}}},[a("div",{staticClass:"card m-4"},[a("div",{staticClass:"card-header"},[t._v("Profil #"+t._s(t.phone))]),a("div",{staticClass:"card-body"},[t.errorMessage?a("div",{staticClass:"text-center text-warning"},[t._v(" "+t._s(t.errorMessage)+" "),a("hr"),a("button",{staticClass:"btn btn-block btn-warning",attrs:{type:"button"},on:{click:t.tray_again}},[t._v("Réessayer")])]):t.isLoading?a("loading-compoenent"):a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",{attrs:{for:"input-live"}},[t._v("Prénom *:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",trim:"",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",{attrs:{for:"input-live"}},[t._v("Nom *:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.family,expression:"family"}],staticClass:"form-control",attrs:{type:"text",trim:"",required:""},domProps:{value:t.family},on:{input:function(e){e.target.composing||(t.family=e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",{attrs:{for:"input-live"}},[t._v("Date de naissance *:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.birthday,expression:"birthday"}],staticClass:"form-control",attrs:{type:"date",trim:"",required:""},domProps:{value:t.birthday},on:{input:function(e){e.target.composing||(t.birthday=e.target.value)}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",{attrs:{for:"input-live"}},[t._v("Sex *:")]),a("select-component",{attrs:{options:t.$config.genres,trim:"",required:""},model:{value:t.genre,callback:function(e){t.genre=e},expression:"genre"}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",[t._v("Wilaya *:")]),a("select-component",{attrs:{options:t.states,trim:"",required:""},model:{value:t.wilaya,callback:function(e){t.wilaya=e},expression:"wilaya"}})],1)]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",[t._v("Baladia *:")]),a("select-component",{attrs:{options:t.cities_filtred,trim:"",required:""},model:{value:t.baladia,callback:function(e){t.baladia=e},expression:"baladia"}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",[t._v("address *:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text",trim:"",required:""},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),a("div",{staticClass:"col"},[a("label",[t._v("Position GPS *:")]),a("latlanComponent",{model:{value:t.lat_lan,callback:function(e){t.lat_lan=e},expression:"lat_lan"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",{attrs:{for:"input-live"}},[t._v("Email *:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",trim:"",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group my-2"},[a("label",{attrs:{for:"input-live"}},[t._v("Mobile *:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone "}],staticClass:"form-control",attrs:{type:"text",trim:"",required:"",disabled:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])])]),a("hr",{staticClass:"my-1"}),"admin"==t.$store.state.profile.type?a("div",{staticClass:"mb-2",attrs:{role:"group my-1"}},[a("label",{attrs:{for:"input-live"}},[t._v("Type de compte *:")]),a("select-component",{attrs:{options:t.$config.types,trim:"",required:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1):t._e(),"admin"==t.$store.state.profile.type&&"driver"==t.type?a("div",{staticClass:"mb-2",attrs:{role:"group my-1"}},[a("label",{attrs:{for:"input-live"}},[t._v("Classe *:")]),a("select-component",{attrs:{options:t.$config.ranks,trim:"",required:""},model:{value:t.rank,callback:function(e){t.rank=e},expression:"rank"}})],1):t._e(),"user"==t.type?a("div",{staticClass:"mb-2",attrs:{role:"group my-1"}},[a("label",{attrs:{for:"input-live"}},[t._v("Kind *:")]),a("select-component",{attrs:{options:t.$config.kinds,trim:"",required:""},model:{value:t.kind,callback:function(e){t.kind=e},expression:"kind"}})],1):t._e(),"driver"==t.type?a("div",{staticClass:"mb-2",attrs:{role:"group my-1"}},[a("label",{attrs:{for:"input-live"}},[t._v("Vehicule *:")]),a("select-component",{attrs:{options:t.$config.vehicules,trim:"",required:""},model:{value:t.vehicule,callback:function(e){t.vehicule=e},expression:"vehicule"}})],1):t._e()])],1),t.errorMessage||t.isLoading?t._e():a("div",{staticClass:"card-footer text-center"},[t._m(0)])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit"}},[a("i",{staticClass:"bi-file-earmark-check me-1"}),t._v(" Enregistrer ")])}],r=a("2909"),o=(a("7db0"),a("99af"),a("b0c0"),a("f9f2")),l=a("f749"),n={name:"editProfileComponent",components:{},data:function(){return{phone:"",name:"",family:"",birthday:"",genre:"",wilaya:"",baladia:"",address:"",lat_lan:{lat:"",lan:""},email:"",kind:"",vehicule:"",type:"",rank:"",errorMessage:null,isLoading:!1}},computed:{cities_filtred:function(){var t=this,e=[];if(""==this.wilaya)return e;var a=this.states.find((function(e){return e.value==t.wilaya}));return a&&(e=[{value:"",text:""}].concat(Object(r["a"])(a.cities))),e}},watch:{wilaya:function(t,e){t&&e&&(this.baladia="")}},created:function(){this.states=l["a"];var t=this.$route.params.phone;"current-user"==t&&this.$store.state.user?(this.phone=this.$store.state.user.phoneNumber,this.load_profile(this.phone)):(this.phone=t,this.load_profile(this.phone))},methods:{tray_again:function(){this.isLoading=!1,this.errorMessage=null,this.load_profile(this.phone)},load_profile:function(t){var e=this;t?(console.log("load_profile",t),this.isLoading=!0,this.errorMessage=null,o["d"].collection("users").doc(t).get().then((function(t){e.isLoading=!1,e.errorMessage=null,t.exists?(console.log("Document successfully loaded!"),e.phone=t.data().phone||"",e.name=t.data().name||"",e.family=t.data().family||"",e.birthday=t.data().birthday||"",e.genre=t.data().genre||"",e.wilaya=t.data().wilaya||"",e.baladia=t.data().baladia||"",e.address=t.data().address||"",e.lat_lan.lat=t.data().lat||"",e.lat_lan.lan=t.data().lan||"",e.email=t.data().email||"",e.kind=t.data().kind||"",e.vehicule=t.data().vehicule||"",e.type=t.data().type||"",e.rank=t.data().rank||""):console.log("Document could not be found!")})).catch((function(t){e.isLoading=!1,e.errorMessage=t,console.log(t)}))):console.log("No user is available")},formSubmit:function(){this.save_profile(this.phone)},save_profile:function(t){var e=this;console.log("save_profile(phone)",t),this.isLoading=!0,this.errorMessage=null;var a=o["a"].serverTimestamp(),i={phone:this.phone,name:this.name,family:this.family,birthday:this.birthday,genre:this.genre,wilaya:this.wilaya,baladia:this.baladia,address:this.address,lat:this.lat_lan.lat,lan:this.lat_lan.lan,email:this.email,kind:this.kind,vehicule:this.vehicule,type:this.type,rank:this.rank,profile_edited:!0,modified_at:a};o["d"].collection("users").doc(t).update(i).then((function(){e.isLoading=!1,e.errorMessage=null,console.log("Profile successfully updated!"),t==e.$store.state.user.phoneNumber&&e.$store.dispatch("update_my_profile"),e.$router.push({name:"home"})})).catch((function(t){e.isLoading=!1,e.errorMessage=t,console.log("error",t)}))}}},c=n,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,"2594581e",null);e["default"]=u.exports},"7db0":function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").find,r=a("44d2"),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)}}]);
//# sourceMappingURL=chunk-fb8933dc.d5df700a.js.map