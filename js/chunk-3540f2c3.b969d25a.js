(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3540f2c3"],{"04d1":function(e,t,r){var a=r("342f"),i=a.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},"159b":function(e,t,r){var a=r("da84"),i=r("fdbc"),s=r("785a"),n=r("17c2"),l=r("9112"),o=function(e){if(e&&e.forEach!==n)try{l(e,"forEach",n)}catch(t){e.forEach=n}};for(var c in i)i[c]&&o(a[c]&&a[c].prototype);o(s)},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,i=r("a640"),s=i("forEach");e.exports=s?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"3d44":function(e,t,r){"use strict";r("8871")},"4e82":function(e,t,r){"use strict";var a=r("23e7"),i=r("59ed"),s=r("7b0b"),n=r("07fa"),l=r("577e"),o=r("d039"),c=r("addb"),u=r("a640"),d=r("04d1"),f=r("d998"),b=r("2d00"),v=r("512c"),p=[],m=p.sort,_=o((function(){p.sort(void 0)})),h=o((function(){p.sort(null)})),g=u("sort"),w=!o((function(){if(b)return b<70;if(!(d&&d>3)){if(f)return!0;if(v)return v<603;var e,t,r,a,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)p.push({k:t+a,v:r})}for(p.sort((function(e,t){return t.v-e.v})),a=0;a<p.length;a++)t=p[a].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),y=_||!h||!g||!w,C=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};a({target:"Array",proto:!0,forced:y},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(w)return void 0===e?m.call(t):m.call(t,e);var r,a,l=[],o=n(t);for(a=0;a<o;a++)a in t&&l.push(t[a]);l=c(l,C(e)),r=l.length,a=0;while(a<r)t[a]=l[a++];while(a<o)delete t[a++];return t}})},"512c":function(e,t,r){var a=r("342f"),i=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"59cd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-4"},[r("div",{staticClass:"d-flex justify-content-between align-items-center"},[r("div",{staticClass:"d-flex"},[r("div",{staticClass:"input-group me-1"},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-default"}},[e._v("Wilaya")]),r("select-component",{attrs:{options:e.states,trim:"",required:""},model:{value:e.wilaya,callback:function(t){e.wilaya=t},expression:"wilaya"}})],1),e.wilaya?r("div",{staticClass:"input-group me-1"},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-default"}},[e._v("Baladia -départ-")]),r("select-component",{attrs:{options:e.cities_filtred,trim:"",required:""},model:{value:e.baladiaFrom,callback:function(t){e.baladiaFrom=t},expression:"baladiaFrom"}})],1):e._e(),e.wilaya?r("div",{staticClass:"input-group me-1"},[r("span",{staticClass:"input-group-text",attrs:{id:"inputGroup-sizing-default"}},[e._v("Baladia -arrivée-")]),r("select-component",{attrs:{options:e.cities_filtred,trim:"",required:""},model:{value:e.baladiaTo,callback:function(t){e.baladiaTo=t},expression:"baladiaTo"}})],1):e._e()]),r("div",{staticClass:"dropdown d-inline ms-1"},[e._m(0),r("ul",{staticClass:"dropdown-menu dropdown-menu-end p-0",attrs:{"aria-labelledby":"actionsMenu"}},[r("li",[r("a",{staticClass:"dropdown-item action",on:{click:e.gererate_fake_db}},[r("i",{staticClass:"bi-person-fill ms-1"}),e._v(" gererate_fake_db ")])]),r("li",[r("a",{staticClass:"dropdown-item action",on:{click:e.remove_cache}},[r("i",{staticClass:"bi-person-fill ms-1"}),e._v(" remove_cache ")])]),r("li",[r("a",{staticClass:"dropdown-item action",on:{click:e.load_all}},[r("i",{staticClass:"bi-person-fill ms-1"}),e._v(" load_all ")])]),r("li",[r("a",{staticClass:"dropdown-item action",on:{click:e.build_matrix}},[r("i",{staticClass:"bi-person-fill ms-1"}),e._v(" build_matrix ")])])])])]),r("hr"),r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-4"},[e._m(1),r("ul",{staticClass:"list-group list-requests"},e._l(e.filtred_drivers,(function(t){return r("li",{key:t.id,staticClass:"list-group-item d-flex justify-content-between align-items-center",on:{click:function(r){return e.select_driver(t)}}},[r("span",[e._v(" "+e._s(t.text)+" "),r("br"),r("span",{staticClass:"badge bg-secondary rounded-pill me-2"},[e._v(e._s(t.baladia||"/"))]),r("span",{staticClass:"badge bg-secondary rounded-pill me-2"},[e._v(e._s(t.requests?t.requests.length:0))])]),e._m(2,!0)])})),0)]),r("div",{staticClass:"col-4"},[e._m(3),r("ul",{staticClass:"list-group list-requests"},e._l(e.filtred_unselected_requests,(function(t){return r("li",{key:t.id,staticClass:"list-group-item d-flex justify-content-between align-items-center",on:{click:function(r){return e.add_to_busket(t)}}},[r("span",[e._v(" "+e._s(t.description)+" "),r("br"),r("span",{staticClass:"badge bg-primary rounded-pill",class:{"bg-secondary":t.baladiaFrom==t.baladiaTo}},[e._v(" "+e._s(t.wilayaFrom||"/")+" "),r("i",{staticClass:"bi-chevron-double-right me-1"}),e._v(" "+e._s(t.baladiaFrom||"/")+" "),r("i",{staticClass:"bi-chevron-right me-1"}),e._v(" "+e._s(t.baladiaTo||"/")+" ")])]),e._m(4,!0)])})),0)]),r("div",{staticClass:"col-4"},[r("div",{staticClass:"busquet"},[r("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[r("h5",{staticClass:"h5 m-0 p-0"},[e._v("Busquet")]),r("div",[r("div",{staticClass:"dropdown d-inline ms-1"},[e._m(5),r("ul",{staticClass:"dropdown-menu dropdown-menu-end p-0",attrs:{"aria-labelledby":"actionsMenu"}},[r("li",[r("a",{staticClass:"dropdown-item action",on:{click:e.deselect_driver}},[r("i",{staticClass:"bi-person me-1"}),e._v(" Déseletionner le Transporteur ")])]),r("li",[r("a",{staticClass:"dropdown-item action",on:{click:e.empty_basket}},[r("i",{staticClass:"bi-basket3 me-1"}),e._v(" Vider la Busquet ")])]),e._m(6),r("li",[r("a",{staticClass:"dropdown-item action text-primary",on:{click:e.validate_busquet}},[r("i",{staticClass:"bi-check-circle-fill me-1"}),e._v(" Valider la Busquet ")])])])])])]),r("div",{staticClass:"busquet-driver",on:{click:function(t){return e.select_driver(null)}}},[e.selected_driver?r("div",{staticClass:"d-flex justify-content-between align-items-center w-100 m-1"},[r("div",[e._v(" "+e._s(e.selected_driver.phone)+" "),r("br"),r("span",{staticClass:"badge bg-secondary rounded-pill me-2"},[e._v(e._s(e.selected_driver.baladia||"/"))]),r("span",{staticClass:"badge bg-secondary rounded-pill"},[e._v(e._s(e.selected_driver.requests?e.selected_driver.requests.length:0))])]),e._m(7)]):r("div",[e._v("/")])]),r("div",{staticClass:"busquet-requests"},[e.selected_driver&&e.selected_driver.requests?r("ul",{staticClass:"list-group"},e._l(e.selected_driver.requests,(function(t){return r("li",{key:t.id,staticClass:"list-group-item d-flex justify-content-between align-items-center",on:{click:function(r){return e.remove_from_busket(t)}}},[r("span",[e._v(" "+e._s(t.description)+" "),r("br"),r("span",{staticClass:"badge bg-primary rounded-pill",class:{"bg-secondary":t.baladiaFrom==t.baladiaTo}},[e._v(" "+e._s(t.wilayaFrom||"/")+" "),r("i",{staticClass:"bi-chevron-double-right me-1"}),e._v(" "+e._s(t.baladiaFrom||"/")+" "),r("i",{staticClass:"bi-chevron-right me-1"}),e._v(" "+e._s(t.baladiaTo||"/")+" ")])]),e._m(8,!0)])})),0):e._e()])])])])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn btn-secondary btn-sm dropdown-toggle",attrs:{role:"button",id:"actionsMenu","data-bs-toggle":"dropdown","aria-expanded":"false"}},[r("i",{staticClass:"bi-gear me-1"}),e._v(" Actions ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[r("h5",{staticClass:"h5 m-0 p-0"},[e._v("Transporteur")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"badge bg-warning rounded-pill"},[r("i",{staticClass:"bi-arrow-right me-1"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[r("h5",{staticClass:"h5 m-0 p-0"},[e._v("Paquets")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"badge bg-warning rounded-pill"},[r("i",{staticClass:"bi-arrow-right me-1"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn btn-secondary btn-sm dropdown-toggle",attrs:{role:"button",id:"actionsMenu","data-bs-toggle":"dropdown","aria-expanded":"false"}},[r("i",{staticClass:"bi-gear me-1"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",[r("hr",{staticClass:"m-0"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"badge bg-danger rounded-pill"},[r("i",{staticClass:"bi-arrow-left me-1"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"badge bg-warning rounded-pill"},[r("i",{staticClass:"bi-arrow-left me-1"})])}],s=r("5530"),n=r("2909"),l=(r("7db0"),r("99af"),r("4de4"),r("d81d"),r("b0c0"),r("4e82"),r("a434"),r("1da1")),o=(r("96cf"),r("159b"),r("f9f2")),c={data:function(){return{drivers:[],requests:[]}},created:function(){this.load_drivers(),this.load_requests()},methods:{remove_cache:function(){localStorage.removeItem("test-drivers"),localStorage.removeItem("test-requests")},load_all:function(){this.load_drivers(),this.load_requests()},load_drivers:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("test-drivers"),r&&(r=JSON.parse(r)),!r){t.next=5;break}return e.drivers=r,t.abrupt("return");case 5:return r=[],a=null,t.prev=7,t.next=10,o["d"].collection("users").where("type","==","driver").orderBy("created_at","desc").get();case 10:a=t.sent,t.next=18;break;case 13:return t.prev=13,t.t0=t["catch"](7),a=null,console.log("error",t.t0),t.abrupt("return");case 18:a.docs.forEach((function(e){e.exists&&r.push({phone:e.data().phone||"",name:(e.data().name||"")+" "+(e.data().family||""),wilaya:e.data().wilaya||"",baladia:e.data().baladia||""})})),console.log("drivers",r),localStorage.setItem("test-drivers",JSON.stringify(r)),e.drivers=r;case 22:case"end":return t.stop()}}),t,null,[[7,13]])})))()},load_requests:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("test-requests"),r&&(r=JSON.parse(r)),!r){t.next=5;break}return e.requests=r,t.abrupt("return");case 5:return r=[],a=null,t.prev=7,t.next=10,o["d"].collection("requests").orderBy("created_at","desc").get();case 10:a=t.sent,t.next=18;break;case 13:return t.prev=13,t.t0=t["catch"](7),a=null,console.log("error",t.t0),t.abrupt("return",!0);case 18:a.docs.forEach((function(e){e.exists&&r.push(Object(s["a"])({},e.data()))})),console.log("requests",r),localStorage.setItem("test-requests",JSON.stringify(r)),e.requests=r;case 22:case"end":return t.stop()}}),t,null,[[7,13]])})))()}}},u=(r("fb6a"),{data:function(){return{}},created:function(){var e=this;setTimeout((function(){e.build_matrix()}),100)},methods:{gererate_fake_db:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,i,s,n,l,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$swal({title:"Combient de Paquets?",input:"number"});case 2:for(r=t.sent,a=parseInt(r.value),i=[],s=0;s<a;s++)n=e.$mock_data.request(),i.push(n);return console.log(i),t.next=9,e.$swal({title:"Combient de Transporteurs?",input:"number"});case 9:for(r=t.sent,a=parseInt(r.value),l=[],o=0;o<a;o++)c=e.$mock_data.user(),c.type="driver",l.push(c);console.log(l),localStorage.setItem("test-requests",JSON.stringify(i)),localStorage.setItem("test-drivers",JSON.stringify(l));case 16:case"end":return t.stop()}}),t)})))()},build_matrix:function(){var e=this;setTimeout((function(){e.build_matrix_()}),100)},build_matrix_:function(){var e=this,t={};if(""!=this.wilaya){t.wilaya=this.wilaya;var r=[];r=this.requests.filter((function(t){return t.wilaya==e.wilayaFrom})),t.total_requestes=r.length;var a=[];this.states.find((function(e){return e.value==t.wilaya})).cities.slice(1).forEach((function(e){var t={};t.name=e.value,a.push(t)})),t.cities=a,t.total_cities=a.length,a.forEach((function(e){var t=r.filter((function(t){return t.baladiaFrom==e.name}));e.total_requestsFrom=t.length})),a.forEach((function(e){var t=r.filter((function(t){return t.baladiaTo==e.name}));e.total_requestsTo=t.length})),a.forEach((function(e){e.requestByDestination=[],a.forEach((function(t){var a=r.filter((function(r){return r.baladiaFrom==e.name&&r.baladiaTo==t.name}));a.length&&e.requestByDestination.push({name:t.name,requests:a,total_requests:a.length})}))})),console.log(t)}else console.log("You need to select a wilaya")}}}),d=r("f749"),f={components:{},mixins:[c,u],data:function(){return{selected_driver:null,selectedDriver:"",selectedDriver_by_baladiaFrom:"",selectedDriver_by_baladiaTo:"",driverSelectionMethod:"",selected_requests:[],filtred_selected_requests:[],filtred_unselected_requests:[],wilaya:"",baladiaFrom:"",baladiaTo:"",errorMessage:null,isLoading:!1}},computed:{cities_filtred:function(){var e=this,t=[];if(""==this.wilaya)return t;var r=this.states.find((function(t){return t.value==e.wilaya}));return r&&(t=[{value:"",text:""}].concat(Object(n["a"])(r.cities))),t},filtred_drivers:function(){var e=this,t=this.drivers;return t=t.filter((function(t){return t.wilaya==e.wilaya})),""!=this.baladiaFrom&&(t=t.filter((function(t){return t.baladia==e.baladiaFrom}))),t=t.map((function(e){return Object(s["a"])({value:e.phone,text:e.phone+" - "+e.name},e)})),t},filtred_drivers_by_baladiaFrom:function(){var e=this,t=this.filtred_drivers;return t=t.filter((function(t){return t.baladia==e.baladiaFrom})),t},filtred_drivers_by_baladiaTo:function(){var e=this,t=this.filtred_drivers;return t=t.filter((function(t){return t.baladia==e.baladiaTo})),t},filtred_requests:function(){var e=this,t=this.requests;return""!=this.wilaya&&(t=t.filter((function(t){return t.wilayaFrom==e.wilaya}))),""!=this.baladiaFrom&&(t=t.filter((function(t){return t.baladiaFrom==e.baladiaFrom}))),""!=this.baladiaTo&&(t=t.filter((function(t){return t.baladiaTo==e.baladiaTo}))),t=t.sort((function(e,t){return e.wilayaFrom.localeCompare(t.wilayaFrom)})),t=t.sort((function(e,t){return e.baladiaFrom.localeCompare(t.baladiaFrom)})),t=t.sort((function(e,t){return e.baladiaTo.localeCompare(t.baladiaTo)})),t}},watch:{wilaya:function(e,t){e&&t&&(this.baladiaFrom="",this.baladiaTo=""),this.update_filter()},baladiaFrom:function(){this.update_filter()},baladiaTo:function(){this.update_filter()}},created:function(){this.states=d["a"],this.wilaya="Alger",this.update_filter()},methods:{do_it:function(){},deselect_driver:function(){},validate_busquet:function(){},empty_basket:function(){},update_filter:function(){this.filtred_unselected_requests=this.filtred_requests.filter((function(e){return 1!=e.selected})),this.filtred_selected_requests=this.filtred_requests.filter((function(e){return 1==e.selected}))},select_driver:function(e){this.selected_driver=e,console.log("selectionner_driver)",e)},add_to_busket:function(e){console.log("add_to_busket(request)",e),console.log("this.selected_driver",this.selected_driver),this.selected_driver?(e.selected=!0,this.update_filter(),this.selected_driver.requests?this.selected_driver.requests.push(e):this.selected_driver.requests=[e]):this.$swal("Vous devez sélectionner un Transporteur d'abord.")},remove_from_busket:function(e){e.selected=!1,console.log("remove_from_busket(request)",e),this.update_filter(),this.selected_requests.splice(this.selected_requests.indexOf(e),1),this.selected_driver.requests.splice(this.selected_driver.requests.indexOf(e),1)}}},b=f,v=(r("3d44"),r("2877")),p=Object(v["a"])(b,a,i,!1,null,null,null);t["default"]=p.exports},"7db0":function(e,t,r){"use strict";var a=r("23e7"),i=r("b727").find,s=r("44d2"),n="find",l=!0;n in[]&&Array(1)[n]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)},8871:function(e,t,r){},a434:function(e,t,r){"use strict";var a=r("23e7"),i=r("23cb"),s=r("5926"),n=r("07fa"),l=r("7b0b"),o=r("65f0"),c=r("8418"),u=r("1dde"),d=u("splice"),f=Math.max,b=Math.min,v=9007199254740991,p="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var r,a,u,d,m,_,h=l(this),g=n(h),w=i(e,g),y=arguments.length;if(0===y?r=a=0:1===y?(r=0,a=g-w):(r=y-2,a=b(f(s(t),0),g-w)),g+r-a>v)throw TypeError(p);for(u=o(h,a),d=0;d<a;d++)m=w+d,m in h&&c(u,d,h[m]);if(u.length=a,r<a){for(d=w;d<g-a;d++)m=d+a,_=d+r,m in h?h[_]=h[m]:delete h[_];for(d=g;d>g-a+r;d--)delete h[d-1]}else if(r>a)for(d=g-a;d>w;d--)m=d+a-1,_=d+r-1,m in h?h[_]=h[m]:delete h[_];for(d=0;d<r;d++)h[d+w]=arguments[d+2];return h.length=g-a+r,u}})},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},addb:function(e,t){var r=Math.floor,a=function(e,t){var n=e.length,l=r(n/2);return n<8?i(e,t):s(a(e.slice(0,l),t),a(e.slice(l),t),t)},i=function(e,t){var r,a,i=e.length,s=1;while(s<i){a=s,r=e[s];while(a&&t(e[a-1],r)>0)e[a]=e[--a];a!==s++&&(e[a]=r)}return e},s=function(e,t,r){var a=e.length,i=t.length,s=0,n=0,l=[];while(s<a||n<i)s<a&&n<i?l.push(r(e[s],t[n])<=0?e[s++]:t[n++]):l.push(s<a?e[s++]:t[n++]);return l};e.exports=a},b64b:function(e,t,r){var a=r("23e7"),i=r("7b0b"),s=r("df75"),n=r("d039"),l=n((function(){s(1)}));a({target:"Object",stat:!0,forced:l},{keys:function(e){return s(i(e))}})},d998:function(e,t,r){var a=r("342f");e.exports=/MSIE|Trident/.test(a)},dbb4:function(e,t,r){var a=r("23e7"),i=r("83ab"),s=r("56ef"),n=r("fc6a"),l=r("06cf"),o=r("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,r,a=n(e),i=l.f,c=s(a),u={},d=0;while(c.length>d)r=i(a,t=c[d++]),void 0!==r&&o(u,t,r);return u}})},e439:function(e,t,r){var a=r("23e7"),i=r("d039"),s=r("fc6a"),n=r("06cf").f,l=r("83ab"),o=i((function(){n(1)})),c=!l||o;a({target:"Object",stat:!0,forced:c,sham:!l},{getOwnPropertyDescriptor:function(e,t){return n(s(e),t)}})}}]);
//# sourceMappingURL=chunk-3540f2c3.b969d25a.js.map